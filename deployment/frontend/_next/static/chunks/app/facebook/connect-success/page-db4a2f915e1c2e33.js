(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[950],{6238:function(e,t,s){Promise.resolve().then(s.bind(s,44))},44:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return n}});var a=s(7437),o=s(2265),r=s(5475);function l(){let e=(0,r.useRouter)(),t=(0,r.useSearchParams)(),[s,l]=(0,o.useState)(!0),[n,c]=(0,o.useState)("");(0,o.useEffect)(()=>{let e=t.get("code"),s=t.get("state"),a=t.get("error");if(a){c("Facebook OAuth error: ".concat(a)),l(!1);return}if(!e){c("No authorization code received from Facebook"),l(!1);return}i(e,s)},[t]);let i=async(t,s)=>{try{console.log("\uD83D\uDD04 Exchanging Facebook OAuth code for access token...");let a=await fetch("/api/facebook/oauth/exchange",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({code:t,state:s,redirectUri:"http://localhost:3000/facebook/connect-success"})});if(!a.ok)throw Error("OAuth exchange failed: ".concat(a.statusText));let o=await a.json();if(o.success)console.log("✅ Facebook OAuth successful!"),console.log("\uD83D\uDC64 User: ".concat(o.user.name)),console.log("\uD83D\uDCF1 Pages: ".concat(o.pages.length)),localStorage.setItem("facebookAccessToken",o.accessToken),localStorage.setItem("facebookUser",JSON.stringify(o.user)),localStorage.setItem("facebookPages",JSON.stringify(o.pages)),l(!1),setTimeout(()=>{e.push("/facebook")},3e3);else throw Error(o.error||"OAuth exchange failed")}catch(e){console.error("❌ Facebook OAuth failed:",e),c(e.message),l(!1)}};return n?(0,a.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-8 max-w-md w-full text-center",children:[(0,a.jsx)("div",{className:"text-4xl mb-4",children:"❌"}),(0,a.jsx)("h1",{className:"text-xl font-bold text-gray-900 mb-4",children:"Connection Failed"}),(0,a.jsx)("p",{className:"text-gray-600 mb-6",children:n}),(0,a.jsx)("button",{onClick:()=>e.push("/facebook"),className:"bg-primary-600 hover:bg-primary-700 text-white px-6 py-2 rounded-lg font-medium transition-colors",children:"Try Again"})]})}):(0,a.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900 flex items-center justify-center relative overflow-hidden",children:[(0,a.jsxs)("div",{className:"absolute inset-0",children:[(0,a.jsx)("div",{className:"absolute top-20 left-10 w-32 h-32 bg-gradient-to-r from-blue-400/20 to-purple-400/20 rounded-full blur-xl animate-pulse"}),(0,a.jsx)("div",{className:"absolute top-40 right-20 w-24 h-24 bg-gradient-to-r from-emerald-400/20 to-blue-400/20 rounded-full blur-xl animate-pulse delay-100"}),(0,a.jsx)("div",{className:"absolute bottom-20 left-1/4 w-40 h-40 bg-gradient-to-r from-pink-400/20 to-purple-400/20 rounded-full blur-xl animate-pulse delay-200"})]}),(0,a.jsx)("div",{className:"bg-white/10 backdrop-blur-lg rounded-2xl shadow-2xl p-12 max-w-lg w-full text-center border border-white/20 relative z-10",children:s?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"text-6xl mb-6 animate-spin",children:"\uD83D\uDD04"}),(0,a.jsx)("h1",{className:"text-3xl font-bold text-white mb-6",children:"\uD83D\uDE80 Connecting to Facebook"}),(0,a.jsx)("p",{className:"text-blue-200 mb-8 text-lg",children:"Processing your Facebook OAuth authentication..."}),(0,a.jsxs)("div",{className:"flex items-center justify-center space-x-2 mb-6",children:[(0,a.jsx)("div",{className:"w-3 h-3 bg-blue-400 rounded-full animate-bounce"}),(0,a.jsx)("div",{className:"w-3 h-3 bg-purple-400 rounded-full animate-bounce delay-75"}),(0,a.jsx)("div",{className:"w-3 h-3 bg-emerald-400 rounded-full animate-bounce delay-150"})]}),(0,a.jsx)("div",{className:"text-gray-300 text-sm",children:"⏳ Exchanging tokens and retrieving your Facebook pages..."})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"text-6xl mb-6",children:"\uD83C\uDF89"}),(0,a.jsx)("h1",{className:"text-3xl font-bold text-white mb-6",children:"Facebook Connected Successfully!"}),(0,a.jsx)("p",{className:"text-green-200 mb-8 text-lg",children:"Your Facebook integration is now active and ready to crush SystemKH!"}),(0,a.jsxs)("div",{className:"bg-green-500/20 border border-green-400/30 rounded-lg p-4 mb-6",children:[(0,a.jsx)("p",{className:"text-green-300 font-semibold",children:"✅ Authentication Complete"}),(0,a.jsx)("p",{className:"text-green-200 text-sm",children:"Redirecting to your dashboard..."})]})]})})]})}function n(){return(0,a.jsx)(o.Suspense,{fallback:(0,a.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900 flex items-center justify-center",children:(0,a.jsx)("div",{className:"text-white",children:"Loading..."})}),children:(0,a.jsx)(l,{})})}}},function(e){e.O(0,[971,117,744],function(){return e(e.s=6238)}),_N_E=e.O()}]);